
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.0">
    
    
      
        <title>Evaluating - PyTypes Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#functionality" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="PyTypes Documentation" class="md-header__button md-logo" aria-label="PyTypes Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PyTypes Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Evaluating
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/pvs-hd-tea/PyTypes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="PyTypes Documentation" class="md-nav__button md-logo" aria-label="PyTypes Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    PyTypes Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/pvs-hd-tea/PyTypes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Workflow
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Workflow" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Workflow
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fetching/" class="md-nav__link">
        Fetching
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tracing/" class="md-nav__link">
        Tracing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../annotating/" class="md-nav__link">
        Annotating
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Evaluating
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Evaluating
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#functionality" class="md-nav__link">
    Functionality
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#foundations-principles" class="md-nav__link">
    Foundations &amp; Principles
  </a>
  
    <nav class="md-nav" aria-label="Foundations &amp; Principles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#typehint-data" class="md-nav__link">
    Typehint data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metric-data" class="md-nav__link">
    Metric data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-data" class="md-nav__link">
    Performance data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trace-data-file-collection-deserialization" class="md-nav__link">
    Trace Data File Collection &amp; Deserialization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#original-file-paths-and-traced-file-paths-collection" class="md-nav__link">
    Original file paths and traced file paths collection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typehint-data-collection" class="md-nav__link">
    Typehint data collection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metric-data-calculation" class="md-nav__link">
    Metric data calculation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#saving-the-metric-and-performance-data" class="md-nav__link">
    Saving the metric and performance data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filetypehintscollector" class="md-nav__link">
    FileTypeHintsCollector
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metricdatacalculator" class="md-nav__link">
    MetricDataCalculator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performancedatafilecollector" class="md-nav__link">
    PerformanceDataFileCollector
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bonus-evaluation-template" class="md-nav__link">
    Bonus: Evaluation Template
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Misc
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Misc" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Misc
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/config/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/resolver/" class="md-nav__link">
        Types, Modules & Qualified Names
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/fetching.md" class="md-nav__link">
        Fetching
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/tracing/" class="md-nav__link">
        Tracing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/optimising/" class="md-nav__link">
        Optimising
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/typegen/" class="md-nav__link">
        Annotating
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/evaluation/" class="md-nav__link">
        Evaluation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/common/" class="md-nav__link">
        Common
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#functionality" class="md-nav__link">
    Functionality
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#foundations-principles" class="md-nav__link">
    Foundations &amp; Principles
  </a>
  
    <nav class="md-nav" aria-label="Foundations &amp; Principles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#typehint-data" class="md-nav__link">
    Typehint data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metric-data" class="md-nav__link">
    Metric data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-data" class="md-nav__link">
    Performance data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trace-data-file-collection-deserialization" class="md-nav__link">
    Trace Data File Collection &amp; Deserialization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#original-file-paths-and-traced-file-paths-collection" class="md-nav__link">
    Original file paths and traced file paths collection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typehint-data-collection" class="md-nav__link">
    Typehint data collection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metric-data-calculation" class="md-nav__link">
    Metric data calculation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#saving-the-metric-and-performance-data" class="md-nav__link">
    Saving the metric and performance data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filetypehintscollector" class="md-nav__link">
    FileTypeHintsCollector
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metricdatacalculator" class="md-nav__link">
    MetricDataCalculator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performancedatafilecollector" class="md-nav__link">
    PerformanceDataFileCollector
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bonus-evaluation-template" class="md-nav__link">
    Bonus: Evaluation Template
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/pvs-hd-tea/PyTypes/edit/gh-pages/docs/workflow/evaluating.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



  <h1>Evaluating</h1>

<h2 id="functionality">Functionality<a class="headerlink" href="#functionality" title="Permanent link">&para;</a></h2>
<p>The evaluation module contains classes/functions to evaluate the traced type hints by using the previously existing type hints. 
A requirement for successful/meaningful evaluation is the usage of the evaluation inline generator when annotating the traced type hints to the files.
Additionally, also contains classes/functions to evaluate the speed of the tracing compared and without tracing. </p>
<div class="highlight"><pre><span></span><code>λ poetry run python main.py evaluate --help
Usage: main.py evaluate [OPTIONS]

  Evaluate given original and traced repository

Options:
  -o, --original PATH   Path to original project directory  [required]
  -t, --traced PATH     Path to traced project directory  [required]
  -s, --store PATH      Path to store performance &amp; metric data  [required]
  -d, --data_name TEXT  Name for data files
  --help                Show this message and exit. 
</code></pre></div>
<p>Example usage: </p>
<div class="highlight"><pre><span></span><code>λ poetry run python main.py evaluate \
    -o original_project_path \
    -t traced_project_path \
    -s path_to_save_evaluation_data \
    -d data_file_name
</code></pre></div>
<p>Note: The command does not evaluate the repositories, it stores the data necessary for evaluation. 
The actual evaluation can be done by loading the data and analyzing it.
The template file ipynb_evaluation_template.py in evaluation can be used as a <a href="#bonus-evaluation-template">template / base implementation</a> for the jupyter notebook file to evaluate the data.
On executing the command, the following steps are done:</p>
<h2 id="foundations-principles">Foundations &amp; Principles<a class="headerlink" href="#foundations-principles" title="Permanent link">&para;</a></h2>
<p>The project's approach to evaluation is to compare the repository/project before, and after annotating the type hints from tracing (will be called original repository and traced repository).
The goal is find out which variables still keep the type hints, and which have different type hints after tracing. 
By comparing the type hints, the quality of the <a href="../tracing/">tracing</a> can be measured. Additionally, potential issues of the <a href="../tracing/">tracing</a> and <a href="../annotating/">traced type hint annotation</a> can be identified and the project can be improved.
The data about the speed of the tracing compared and without tracing can also be evaluated. For more details, see <a href="#performance-data">Performance Data</a>.</p>
<h3 id="typehint-data">Typehint data<a class="headerlink" href="#typehint-data" title="Permanent link">&para;</a></h3>
<p>When comparing a file before and after traced type hint annotation, the type hints have to be compared. 
This is done by comparing the so-called typehint data of the original and the traced file (= the original file after annotating). 
The typehint data contains the information about type hints of a file/multiple files. It is used to find out which variables have what kind of type hint. 
By comparing the typehint data of the original and traced file, it can be determined whether the type hints of the matching variables also match or differ.</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Meaning</th>
<th>Type</th>
<th>Null?</th>
</tr>
</thead>
<tbody>
<tr>
<td>Filename</td>
<td>Relative path to file of traced instance from project root</td>
<td>string</td>
<td>Never</td>
</tr>
<tr>
<td>Class</td>
<td>Name of class traced instance is in</td>
<td>string</td>
<td>When not in a class' scope</td>
</tr>
<tr>
<td>FunctionName</td>
<td>Name of function traced instance is in</td>
<td>string</td>
<td>When not in a function's scope</td>
</tr>
<tr>
<td>ColumnOffset</td>
<td>The column offset of the line the traced instance occurs on</td>
<td>uint</td>
<td>Never</td>
</tr>
<tr>
<td>Category</td>
<td>Number identifying context traced instance appears in</td>
<td>int</td>
<td>Never</td>
</tr>
<tr>
<td>VarName</td>
<td>Name of traced instance</td>
<td>string</td>
<td>Never</td>
</tr>
<tr>
<td>Type</td>
<td>Name of traced instance's type</td>
<td>string</td>
<td>Never</td>
</tr>
</tbody>
</table>
<p>As the line numbers of the original and traced file due to the <a href="../annotating/#transformers">additional imports</a> differ, the column offset is used instead. 
It corresponds to the scope of the variable.
To determine the typehint data for one or more files, the <a href="#filetypehintscollector">FileTypeHintsCollector</a> is used.</p>
<h3 id="metric-data">Metric data<a class="headerlink" href="#metric-data" title="Permanent link">&para;</a></h3>
<p>The comparison of the original and traced typehint data is done by merging their rows. This is done to find out which variables in the original and traced typehint data are matching.
Due to the merge, two type columns exist: The type in the original typehint data and the traced typehint data.
Additionally, it is checked whether a variable which has a type hint in one file also has a type hint in the other file. The corresponding information cna be found in the <code>Completeness</code> column.
It returns the information whether the same variable in the original and in the traced file has a type hint in both files. It is null if there is a type hint in the traced file, but not in the original.
In addition to that, the <code>Correctness</code> Column is introduced which returns the information whether the type hints match. It is automatically False, if the corresponding completeness is False and null if the corresponding completeness is null.
The merged data which the new schema is called "metric data".</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Meaning</th>
<th>Type</th>
<th>Null?</th>
</tr>
</thead>
<tbody>
<tr>
<td>Filename</td>
<td>Relative path to file of traced instance from project root</td>
<td>string</td>
<td>Never</td>
</tr>
<tr>
<td>Class</td>
<td>Name of class traced instance is in</td>
<td>string</td>
<td>When not in a class' scope</td>
</tr>
<tr>
<td>FunctionName</td>
<td>Name of function traced instance is in</td>
<td>string</td>
<td>When not in a function's scope</td>
</tr>
<tr>
<td>ColumnOffset</td>
<td>The column offset of the line the traced instance occurs on</td>
<td>uint</td>
<td>Never</td>
</tr>
<tr>
<td>Category</td>
<td>Number identifying context traced instance appears in</td>
<td>int</td>
<td>Never</td>
</tr>
<tr>
<td>VarName</td>
<td>Name of traced instance</td>
<td>string</td>
<td>Never</td>
</tr>
<tr>
<td>OriginalType</td>
<td>Name of the type hint in the original files</td>
<td>string</td>
<td>When not existing in the original typehint data</td>
</tr>
<tr>
<td>GeneratedType</td>
<td>Name of the type hint in the traced files</td>
<td>string</td>
<td>When not existing in the traced typehint data</td>
</tr>
<tr>
<td>Completeness</td>
<td>Do OriginalType and GeneratedType exist?</td>
<td>bool</td>
<td>When OriginalType is null</td>
</tr>
<tr>
<td>Correctness</td>
<td>Do OriginalType and GeneratedType match?</td>
<td>bool</td>
<td>When OriginalType is null</td>
</tr>
</tbody>
</table>
<p>Apart from determining the total completeness and correctness, it can also be used to determine the completeness and correctness for each file. 
It can be evaluated which files have high completeness and/or high correctness or which don't. With this, the files with low completeness/low correctness can be traced and figure out the issues.
Thus, improvements can be figured out to improve the quality of the <a href="../tracing/">tracing</a> and <a href="../annotating/">traced type hint annotation</a>.</p>
<p>To determine the metric data given two typehint data instances, the <a href="#metricdatacalculator">metric data calculator</a> is used.</p>
<h3 id="performance-data">Performance data<a class="headerlink" href="#performance-data" title="Permanent link">&para;</a></h3>
<p>Apart from generating the trace data, the tracing can also generate the so-called performance data. This can be done by setting the <code>benchmark_performance</code> value to <code>True</code> in the <a href="../../misc/config/">configuration</a>.
It contains the execution times of the test function without tracing, with tracing without optimizations and with optimizations. Additionally, the tracing is also benchmarked by the the minimum implementation of a tracer (The TracerBase/the NoOperationTracer).
It can be used to evaluate whether the tracer is faster with/without optimizations and how much slower it is compared to execution without tracing.
Compared to other data schemas, the times are stored in an array (<code>np.ndarray</code>).
Collecting and deserializing the performance data is done by the <a href="#performancedatafilecollector">PerformanceDataFileCollector</a></p>
<h3 id="trace-data-file-collection-deserialization">Trace Data File Collection &amp; Deserialization<a class="headerlink" href="#trace-data-file-collection-deserialization" title="Permanent link">&para;</a></h3>
<p>The trace data files which have been generated by <a href="../tracing/">tracing</a> have to be collected and deserialized into one single dataframe. 
This is done by using the <a href="../annotating/#tracedatafilecollector">trace data file collector</a>. 
This is used to find out which files have been changed by <a href="../annotating/">traced type hint annotation</a>.</p>
<h3 id="original-file-paths-and-traced-file-paths-collection">Original file paths and traced file paths collection<a class="headerlink" href="#original-file-paths-and-traced-file-paths-collection" title="Permanent link">&para;</a></h3>
<p>The file paths in the trace data are iterated. Combined with the original repository &amp; traced repository path, the original &amp; traced file paths are determined.
The corresponding files are compared. If the traced type hint annotation did not change the file, then the file contents of the original file and the file after annotation are the same.
If the file contents are different, then the annotating has modified the file.</p>
<p>The resulting original and traced file paths whose corresponding files differ are used to determine the original typehint data and the traced typehint data.</p>
<h3 id="typehint-data-collection">Typehint data collection<a class="headerlink" href="#typehint-data-collection" title="Permanent link">&para;</a></h3>
<p>To collect the typehint data for multiple files, the <a href="#filetypehintscollector">FileTypeHintsCollector</a> is used.
The instance collects the typehint data for each file and returns the data as a single dataframe. 
This is done for the original file paths and the traced file paths, resulting in 2 typehint data instances: The original and traced typehint data.</p>
<h3 id="metric-data-calculation">Metric data calculation<a class="headerlink" href="#metric-data-calculation" title="Permanent link">&para;</a></h3>
<p>After getting the original and traced typehint data, the <a href="#MetricDataCalculator">metric data calculator</a> is used to get the metric data.</p>
<h3 id="saving-the-metric-and-performance-data">Saving the metric and performance data<a class="headerlink" href="#saving-the-metric-and-performance-data" title="Permanent link">&para;</a></h3>
<p>After getting the metric data, it is serialized in the data file path provided by the command options. Additionally, the performance data is collected and deserialized by the <a href="#PerformanceDataFileCollector">PerformanceDataFileCollector</a> into one single array.
The array is also serialized in the same data file path; only with a different file extension.</p>
<hr />
<p>After executing the command, the metric and performance data are stored in the data file paths. 
A jupyter notebook can be used to analyze the data. 
The template file ipynb_evaluation_template.py in evaluation can be used as a <a href="#bonus-evaluation-template">template/base implementation</a> for the jupyter notebook file to evaluate the data.</p>
<h3 id="filetypehintscollector">FileTypeHintsCollector<a class="headerlink" href="#filetypehintscollector" title="Permanent link">&para;</a></h3>
<p>Given a folder path/ or one or more file paths, collects the type hints in the .py files and stores these in a typehint data instance.
It does this by parsing the code of each file to a CST (common syntax tree) and finding the type hints of each variable/function return.with a visitor. 
To ensure that matching types are stored in the typehint data with the same type name, multiple normalization algorithms are used to include the modules to the name and unify type unions.
Examples:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span> <span class="nn">pathlib</span>
<span class="kn">import</span> <span class="nn">typing</span>

<span class="n">a</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="o">...</span> <span class="c1"># -&gt; Collected type hint name is pathlib.Path</span>
<span class="n">b</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">=</span> <span class="o">...</span> <span class="c1"># -&gt; Collected type hint name is pathlib.Path</span>
<span class="n">c</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">...</span>  <span class="c1"># -&gt; Collected type hint name is int | str</span>
<span class="n">d</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>  <span class="c1"># -&gt; Collected type hint name is int | str</span>
</code></pre></div>
Used to get the typehint data of multiple files.</p>
<p>Note: Using an AST would probably also work, but since CSTs have already been used in the <a href="../annotating/">typegen</a> module, the same library has been used.</p>
<h3 id="metricdatacalculator">MetricDataCalculator<a class="headerlink" href="#metricdatacalculator" title="Permanent link">&para;</a></h3>
<p>Given two typehint data instances (considered as the original and traced typehint data), calculates the corresponding metric data. Is done by merging the typehint data instances.</p>
<p>Note: Due to using the column offsets instead of the line numbers, following conflicts can arise:
Original file:</p>
<p><div class="highlight"><pre><span></span><code><span class="n">e</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">e</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;str&quot;</span>
</code></pre></div>
Traced file:
<div class="highlight"><pre><span></span><code><span class="n">e</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">e</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="s2">&quot;str&quot;</span>
</code></pre></div>
or:
<div class="highlight"><pre><span></span><code><span class="n">e</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">e</span> <span class="o">=</span> <span class="s2">&quot;str&quot;</span>
</code></pre></div></p>
<p>The original typehint data contains two rows for the two lines in which 'e' is assigned to a value. 
The contents of the two rows, except for the type name, match. 
Compared to the original typehint data, the traced typehint data only has one row in both cases. 
Since the line number does not exist and the column offset is the same in both cases, the traced typehint data would be the same in both cases.
Thus, it is not possible to differentiate between the two cases, resulting in the following conflict:
When merging, it has to be decided whether the rows containing the information for <code>e: bool</code> (Type hints match) should be merged or whether <code>e: str</code> of the original typehint data and <code>e: bool</code> of the traced typehint data should be merged (type hints differ). 
This can affect the completeness and correctness.
The metric data calculator is defined in such a way that it does the former, increasing the correctness.</p>
<h3 id="performancedatafilecollector">PerformanceDataFileCollector<a class="headerlink" href="#performancedatafilecollector" title="Permanent link">&para;</a></h3>
<p>Given a folder path, collects trace data files and deserializes them into one single performance data dataframe.</p>
<h3 id="bonus-evaluation-template">Bonus: Evaluation Template<a class="headerlink" href="#bonus-evaluation-template" title="Permanent link">&para;</a></h3>
<p>Not part of the API as it is considered a jupyter notebook file. 
To load the template .py file in jupyter notebook, install the <code>jupytext</code> module.
Loads the metric &amp; performance data and determines the total completeness and correctness. 
Also determines which files have a high/low completeness/correctness.
Additionally, analyzes the performance data by plotting the execution times with tracing compared to times without tracing as scatter points.
Can be used as a template/base implementation for evaluating the metric &amp; performance data.</p>




              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../annotating/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Annotating" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Annotating
            </div>
          </div>
        </a>
      
      
        
        <a href="../../misc/config/" class="md-footer__link md-footer__link--next" aria-label="Next: Configuration" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Configuration
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
    
  </body>
</html>